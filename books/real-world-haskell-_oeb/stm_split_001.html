---
layout: page
title: "Real World Haskell, 1st Edition"
prev: stm_split_000.html
next: I_sect128_d1e51806.html
book_path: books/real-world-haskell-_oeb/
---
{% include JB/setup %}
{% raw %}
<div>

<div class="calibre47"></div><h2 id="title-IDAGXRUD" class="docPrefaceTitle">Chapter 28. Software Transactional Memory</h2><a name="x_dL1" class="calibre5" id="x_dL1"></a><p class="docText">In the <a name="ch28-stmsoftware" class="calibre27" id="ch28-stmsoftware"></a>traditional threaded model of concurrent programming, when we
  share data among threads, we keep it consistent using locks, and we notify
  threads of changes using condition variables. Haskell's MVar
  mechanism improves somewhat upon these tools, but it still suffers from all
  of the same problems:</p><ul class="calibre28"><li class="calibre36"><p class="docText">Race conditions due to forgotten locks</p></li><li class="calibre36"><p class="docText">Deadlocks resulting from inconsistent lock
      ordering</p></li><li class="calibre36"><p class="docText">Corruption caused by uncaught exceptions</p></li><li class="calibre36"><p class="docText">Lost wakeups induced by omitted notifications</p></li></ul><a name="x_iL1" class="calibre5" id="x_iL1"></a><p class="docText">These problems frequently affect even the smallest
  concurrent programs, but the difficulties they pose become far worse in
  larger code bases or under heavy load.</p><a name="x_jL1" class="calibre5" id="x_jL1"></a><p class="docText">For instance, a program with a few big locks is somewhat
  tractable to write and debug, but contention for those locks will clobber us
  under heavy load. If we react with finer-grained locking, it becomes
  <span class="docEmphasis">far</span> harder to keep our software working at all. The
  additional bookkeeping will hurt performance even when loads are
  light.</p>
<ul class="calibre28"></ul><table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody"><tr class="calibre6"><td valign="middle" class="v1" height="5"><img src="pixel.gif" alt="" border="0" class="calibre8"/></td></tr><tr class="calibre6"><td valign="middle" class="v1"><table cellpadding="0" cellspacing="0" border="0" width="100%" class="sfbody"><tr class="calibre6"><td class="v"><span class="calibre9"> </span>
                   
                  <span class="calibre9">   </span>
             <span class="calibre9"> </span></td></tr></table></td><td class="v1"/><td valign="middle" class="v2"><a href="21061538.html" class="calibre13"><img src="btn_next_.gif" alt="Next" border="0" class="calibre26"/></a> 
           
          <span class="calibre9"><a target="_self" href="sockets_tcp.html" title="Previous section" class="calibre13"><img border="0" src="btn_prev.gif" alt="Previous section" id="btn_prev" class="calibre14"/></a></span>
				
				 
				
				<span class="calibre9"><a target="_self" href="I_sect128_d1e51806.html" title="Next section" class="calibre13"><img border="0" src="btn_next.gif" alt="Next section" id="btn_next" class="calibre14"/></a></span></td></tr></table><table width="100%" border="0" cellspacing="0" cellpadding="2" class="sfbody"><tr class="calibre6"><td valign="top" class="v2"><span class="calibre9"></span></td></tr></table><!--IP User 2--><td class="calibre7">
                         
                      </td><tr class="calibre6"><td colspan="3" valign="bottom" class="calibre7"><br class="calibre20"/><p class="v4"></p><br class="calibre20"/></td></tr></div>

{% endraw %}

